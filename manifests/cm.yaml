apiVersion: v1
kind: ConfigMap
metadata:
  name: ibkr-nginx-config
  labels:
    app: ibkr-dashboard-nginx
data:
  # file-like keys
  default.conf: "server {\nlisten       8443 ssl;\nlisten  [::]:8443 ssl;\nserver_name  localhost;\nssl_certificate /usr/src/app/certchain/tls.crt;\nssl_certificate_key /usr/src/app/certchain/tls.key;\n#magic___^_^___line\n#access_log  /var/log/nginx/host.access.log  main;\n#magic___^_^___line\nlocation / {\n    root   /usr/src/app/webserver/static;\n    index  index.html;\n    #magic___^_^___line\n    auth_basic \"Restricted\";\n    auth_basic_user_file  /etc/nginx/htpasswd/.htpasswd;\n    #magic___^_^___line\n    include  /etc/nginx/mime.types;\n}\n    #magic___^_^___line\n#error_page  404              /404.html;\n    #magic___^_^___line\n# redirect server error pages to the static page /50x.html\n#\nerror_page   500 502 503 504  /50x.html;\nlocation = /50x.html {\n    root   /usr/src/app/webserver/static;\n}\n    #magic___^_^___line\n# proxy the PHP scripts to Apache listening on 127.0.0.1:80\n#\n#location ~ \\.php$ {\n#    proxy_pass   http://127.0.0.1;\n#}\n    #magic___^_^___line\n# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n#\n#location ~ \\.php$ {\n#    root           html;\n#    fastcgi_pass   127.0.0.1:9000;\n#    fastcgi_index  index.php;\n#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n#    include        fastcgi_params;\n#}\n    #magic___^_^___line\n# deny access to .htaccess files, if Apache's document root\n# concurs with nginx's one\n#\n#location ~ /\\.ht {\n#    deny  all;\n#}\n}   \n"
